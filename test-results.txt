Starting API Endpoint Tests
==============================
âœ… Created initial category with ID: 680bbb4f7465b16fb90f2dde for product tests
âœ… Created initial product with ID: 680bbb4f7465b16fb90f2de0 for order tests

=== Endpoint: /api/products ===
Description: Products endpoint. Supports CRUD operations for products. Each product belongs to a category and may have a discount.
Methods:
  - GET /api/products (get all)
  - GET /api/products/:id (get by id)
  - POST /api/products (create)
  - PUT /api/products/:id (update)
  - DELETE /api/products/:id (delete)

-----Testing products CRUD operations-----
POST products - Creating new product
âœ… Created product with ID: 680bbb4f7465b16fb90f2de2
Response Status: 201
Response JSON: {
  "name": "Test Product",
  "description": "A test product",
  "price": 19.99,
  "category": "680bbb4f7465b16fb90f2dde",
  "stock": 10,
  "imageUrl": "test-image.jpg",
  "_id": "680bbb4f7465b16fb90f2de2",
  "createdAt": "2025-04-25T16:41:51.458Z",
  "updatedAt": "2025-04-25T16:41:51.458Z",
  "__v": 0
}
GET products - Getting all products
âœ… Retrieved 6 products
Response Status: 200
Response JSON: [
  {
    "_id": "6808f7ddc77be29937a03dbd",
    "name": "ÙØ³ØªØ§Ù† Ø£Ù†ÙŠÙ‚",
    "description": "ÙØ³ØªØ§Ù† Ù†Ø³Ø§Ø¦ÙŠ Ø£Ù†ÙŠÙ‚ Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ù…Ù†Ø§Ø³Ø¨Ø§Øª",
    "price": 4500,
    "oldPrice": 5000,
    "categoryId": "6808f7dcc77be29937a03db3",
    "images": [
      "https://via.placeholder.com/400x500"
    ],
    "features": [
      "ØªØµÙ…ÙŠÙ… Ø¹ØµØ±ÙŠ",
      "Ù‚Ù…Ø§Ø´ Ù…Ø±ÙŠØ­"
    ],
    "material": "Ø­Ø±ÙŠØ± ÙˆÙ‚Ø·Ù†",
    "care": "ØªÙ†Ø¸ÙŠÙ Ø¬Ø§Ù ÙÙ‚Ø·",
    "sizes": [
      "S",
      "M",
      "L"
    ],
    "colors": [
      {
        "name": "Ø£Ø­Ù…Ø±",
        "value": "#FF0000"
      },
      {
        "name": "Ø£Ø³ÙˆØ¯",
        "value": "#000000"
      }
    ],
    "isNewProduct": false,
    "rating": 5,
    "reviews": 8,
    "discountId": "6808f7dcc77be29937a03db8",
    "createdAt": "2025-04-23T14:23:25.022Z",
    "updatedAt": "2025-04-25T14:25:09.254Z",
    "__v": 0,
    "stock": 0
  },
  {
    "_id": "6808f7ddc77be29937a03dbe",
    "name": "Ø­Ù‚ÙŠØ¨Ø© ÙŠØ¯ Ù†Ø³Ø§Ø¦ÙŠØ©",
    "description": "Ø­Ù‚ÙŠØ¨Ø© ÙŠØ¯ Ø¹ØµØ±ÙŠØ© ÙˆØ£Ù†ÙŠÙ‚Ø©",
    "price": 3500,
    "categoryId": "6808f7dcc77be29937a03db4",
    "images": [
      "https://via.placeholder.com/400x500"
    ],
    "features": [
      "Ø³Ø¹Ø© ÙƒØ¨ÙŠØ±Ø©",
      "Ù…ØªÙŠÙ†Ø© ÙˆØ¹Ù…Ù„ÙŠØ©"
    ],
    "material": "Ø¬Ù„Ø¯ ØµÙ†Ø§Ø¹ÙŠ",
    "care": "ØªÙ†Ø¸ÙŠÙ Ø¨Ù‚Ø·Ø¹Ø© Ù‚Ù…Ø§Ø´ Ù…Ø¨Ù„Ù„Ø©",
    "sizes": [
      "ÙˆØ§Ø­Ø¯"
    ],
    "colors": [
      {
        "name": "Ø¨Ù†ÙŠ",
        "value": "#8B4513"
      }
    ],
    "isNewProduct": true,
    "rating": 4,
    "reviews": 5,
    "discountId": "6808f7dcc77be29937a03db9",
    "createdAt": "2025-04-23T14:23:25.022Z",
    "updatedAt": "2025-04-25T14:58:15.507Z",
    "__v": 0,
    "stock": 0
  },
  {
    "stock": 0,
    "_id": "6808f7ddc77be29937a03dbc",
    "name": "Ù‚Ù…ÙŠØµ ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠ Ø£Ø²Ø±Ù‚",
    "description": "Ù‚Ù…ÙŠØµ Ø±Ø¬Ø§Ù„ÙŠ ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠ Ø¨Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø²Ø±Ù‚",
    "price": 2500,
    "categoryId": "6808f7dcc77be29937a03db2",
    "images": [
      "https://via.placeholder.com/400x500"
    ],
    "features": [
      "Ø®Ø§Ù…Ø© Ù‚Ø·Ù†ÙŠØ©",
      "Ù…Ø±ÙŠØ­ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠ"
    ],
    "material": "Ù‚Ø·Ù† 100%",
    "care": "ØºØ³ÙŠÙ„ Ø¨Ù…Ø§Ø¡ Ø¨Ø§Ø±Ø¯",
    "sizes": [
      "S",
      "M",
      "L",
      "XL"
    ],
    "colors": [
      {
        "name": "Ø£Ø²Ø±Ù‚",
        "value": "#0000FF"
      }
    ],
    "isNewProduct": true,
    "rating": 4.5,
    "reviews": 12,
    "discountId": null,
    "createdAt": "2025-04-23T14:23:25.022Z",
    "updatedAt": "2025-04-23T14:23:25.022Z",
    "__v": 0
  },
  {
    "_id": "6809fed15ec23bcea5a2b574",
    "name": "Ø³Ø§Ø¹Ø© Ø±Ø¬Ø§Ù„ÙŠØ© ROLEX",
    "description": "ğŸ”¥ ÙƒÙ…ÙŠØ§Øª Ù…Ø­Ø¯ÙˆØ¯Ø©ØŒ ÙÙ„Ø§ ØªÙÙˆØª Ù‡Ø°Ù‡ Ø§Ù„ÙØ±ØµØ©!\nğŸ’ Ù‚Ø·Ø¹ ÙØ§Ø®Ø±Ø© ØªØ­Ù…Ù„ Ù…Ø¹Ø§Ù†ÙŠ Ø¹Ù…ÙŠÙ‚Ø©. ğŸ’\nğŸŒŸ Ø¬ÙˆØ¯Ø© Ù…Ø«Ø§Ù„ÙŠØ© ÙˆØªØµÙ…ÙŠÙ… Ø£Ù†ÙŠÙ‚ ÙŠØ¹ÙƒØ³ Ø°ÙˆÙ‚Ùƒ Ø§Ù„Ø±ÙÙŠØ¹. ğŸŒŸ\nğŸ›’ Ù‡Ø¯Ø§ÙŠØ§ Ù…Ø«Ø§Ù„ÙŠØ© Ø¨Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±ØŒ Ø®Ø¯Ù…Ø© Ø¹Ù…Ù„Ø§Ø¡ Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠØ©. ğŸ›’\nğŸš€ ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹ Ø¥Ù„Ù‰ 58 ÙˆÙ„Ø§ÙŠØ© ÙÙŠ ÙˆÙ‚Øª Ù‚ÙŠØ§Ø³ÙŠ. ğŸš€\nğŸ“© Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù† ÙˆØ§Ø³ØªÙ…ØªØ¹ Ø¨ØªØ¬Ø±Ø¨Ø© ØªØ³ÙˆÙ‚ Ø³Ù„Ø³Ø©. ğŸ“©\n#ØªØ³ÙˆÙ‚_Ø¨Ø«Ù‚Ø© #Ø¬ÙˆØ¯Ø©_Ø¹Ø§Ù„ÙŠØ© #ØªÙˆØµÙŠÙ„_Ø³Ø±ÙŠØ¹ #OmniMart #Ù‡Ø¯Ø§ÙŠØ§_ÙØ§Ø®Ø±Ø© #Ø°ÙƒØ±ÙŠØ§Øª_Ù„Ø§_ØªÙ†Ø³Ù‰ #Ø®Ø¯Ù…Ø©_Ø¹Ù…Ù„Ø§Ø¡_Ù…ØªÙ…ÙŠØ²Ø© #ØªØ³ÙˆÙ‚_Ø£ÙˆÙ†Ù„Ø§ÙŠÙ† #Ø§Ù‡Ø¯ÙŠ_Ø¨Ø­Ø¨ #Ù‚ØµØ©_Ø­Ø¨ #Ø§ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª_Ø±Ø§Ù‚ÙŠØ©",
    "price": 1250,
    "oldPrice": 2600,
    "categoryId": "680811421c0c35d6d3f6f6ce",
    "images": [
      "https://i.imgur.com/HBZ28CG.jpeg"
    ],
    "features": [],
    "material": "",
    "care": "",
    "sizes": [
      "L"
    ],
    "colors": [
      {
        "name": "Ø£Ø³ÙˆØ¯",
        "value": "#000000"
      },
      {
        "name": "Ø£Ø¨ÙŠØ¶",
        "value": "#FFFFFF"
      }
    ],
    "isNewProduct": true,
    "rating": 0,
    "reviews": 0,
    "discountId": null,
    "createdAt": "2025-04-24T09:05:21.151Z",
    "updatedAt": "2025-04-25T15:50:11.394Z",
    "__v": 0,
    "stock": 0
  },
  {
    "_id": "680bbb4f7465b16fb90f2de0",
    "name": "Test Product",
    "description": "A test product",
    "price": 19.99,
    "category": {
      "_id": "680bbb4f7465b16fb90f2dde",
      "name": "Test Category",
      "description": "A test category",
      "__v": 0
    },
    "stock": 10,
    "imageUrl": "test-image.jpg",
    "createdAt": "2025-04-25T16:41:51.365Z",
    "updatedAt": "2025-04-25T16:41:51.365Z",
    "__v": 0
  },
  {
    "_id": "680bbb4f7465b16fb90f2de2",
    "name": "Test Product",
    "description": "A test product",
    "price": 19.99,
    "category": {
      "_id": "680bbb4f7465b16fb90f2dde",
      "name": "Test Category",
      "description": "A test category",
      "__v": 0
    },
    "stock": 10,
    "imageUrl": "test-image.jpg",
    "createdAt": "2025-04-25T16:41:51.458Z",
    "updatedAt": "2025-04-25T16:41:51.458Z",
    "__v": 0
  }
]
GET products/680bbb4f7465b16fb90f2de2 - Getting single product
âœ… Retrieved product
Response Status: 200
Response JSON: {
  "_id": "680bbb4f7465b16fb90f2de2",
  "name": "Test Product",
  "description": "A test product",
  "price": 19.99,
  "category": {
    "_id": "680bbb4f7465b16fb90f2dde",
    "name": "Test Category",
    "description": "A test category",
    "__v": 0
  },
  "stock": 10,
  "imageUrl": "test-image.jpg",
  "createdAt": "2025-04-25T16:41:51.458Z",
  "updatedAt": "2025-04-25T16:41:51.458Z",
  "__v": 0
}
PUT products/680bbb4f7465b16fb90f2de2 - Updating product
âœ… Updated product
Response Status: 200
Response JSON: {
  "_id": "680bbb4f7465b16fb90f2de2",
  "name": "Updated Test Product",
  "description": "A test product",
  "price": 19.99,
  "category": "680bbb4f7465b16fb90f2dde",
  "stock": 10,
  "imageUrl": "test-image.jpg",
  "createdAt": "2025-04-25T16:41:51.458Z",
  "updatedAt": "2025-04-25T16:41:51.876Z",
  "__v": 0
}
DELETE products/680bbb4f7465b16fb90f2de2 - Deleting product
âœ… Deleted product
Response Status: 200
Response JSON: {
  "message": "Product deleted"
}

=== Endpoint: /api/categories ===
Description: Categories endpoint. Supports CRUD operations for product categories.
Methods:
  - GET /api/categories (get all)
  - GET /api/categories/:id (get by id)
  - POST /api/categories (create)
  - PUT /api/categories/:id (update)
  - DELETE /api/categories/:id (delete)

-----Testing categories CRUD operations-----
âœ… Categories operations tested during initialization

=== Endpoint: /api/orders ===
Description: Orders endpoint. Supports CRUD operations for customer orders. Each order contains customer info and a list of products.
Methods:
  - GET /api/orders (get all)
  - GET /api/orders/:id (get by id)
  - POST /api/orders (create)
  - PUT /api/orders/:id (update)
  - DELETE /api/orders/:id (delete)

-----Testing orders CRUD operations-----
POST orders - Creating new order
âœ… Created order with ID: 680bbb507465b16fb90f2dea
Response Status: 201
Response JSON: {
  "customerName": "Test Customer",
  "customerPhone": "1234567890",
  "wilaya": "Test City",
  "baladia": "Test Baladia",
  "products": [
    {
      "product": "680bbb4f7465b16fb90f2de0",
      "productName": "Test Product",
      "price": 19.99,
      "quantity": 2,
      "_id": "680bbb507465b16fb90f2deb"
    }
  ],
  "totalAmount": 39.98,
  "shippingCost": 5,
  "status": "pending",
  "_id": "680bbb507465b16fb90f2dea",
  "createdAt": "2025-04-25T16:41:52.056Z",
  "updatedAt": "2025-04-25T16:41:52.056Z",
  "__v": 0
}
GET orders - Getting all orders
âœ… Retrieved 2 orders
Response Status: 200
Response JSON: [
  {
    "_id": "680bb99f88672233f407a406",
    "customerName": "Test Customer",
    "customerPhone": "1234567890",
    "customerAddress": "Test Address, Street 123",
    "wilaya": "Test City",
    "products": [
      {
        "product": null,
        "productName": "Test Product",
        "price": 19.99,
        "quantity": 2,
        "_id": "680bb99f88672233f407a407"
      }
    ],
    "totalAmount": 39.98,
    "shippingCost": 5,
    "status": "pending",
    "createdAt": "2025-04-25T16:34:39.307Z",
    "updatedAt": "2025-04-25T16:34:39.307Z",
    "__v": 0
  },
  {
    "_id": "680bbb507465b16fb90f2dea",
    "customerName": "Test Customer",
    "customerPhone": "1234567890",
    "wilaya": "Test City",
    "baladia": "Test Baladia",
    "products": [
      {
        "product": {
          "_id": "680bbb4f7465b16fb90f2de0",
          "name": "Test Product",
          "description": "A test product",
          "price": 19.99,
          "category": "680bbb4f7465b16fb90f2dde",
          "stock": 10,
          "imageUrl": "test-image.jpg",
          "createdAt": "2025-04-25T16:41:51.365Z",
          "updatedAt": "2025-04-25T16:41:51.365Z",
          "__v": 0
        },
        "productName": "Test Product",
        "price": 19.99,
        "quantity": 2,
        "_id": "680bbb507465b16fb90f2deb"
      }
    ],
    "totalAmount": 39.98,
    "shippingCost": 5,
    "status": "pending",
    "createdAt": "2025-04-25T16:41:52.056Z",
    "updatedAt": "2025-04-25T16:41:52.056Z",
    "__v": 0
  }
]
GET orders/680bbb507465b16fb90f2dea - Getting single order
âœ… Retrieved order
Response Status: 200
Response JSON: {
  "_id": "680bbb507465b16fb90f2dea",
  "customerName": "Test Customer",
  "customerPhone": "1234567890",
  "wilaya": "Test City",
  "baladia": "Test Baladia",
  "products": [
    {
      "product": {
        "_id": "680bbb4f7465b16fb90f2de0",
        "name": "Test Product",
        "description": "A test product",
        "price": 19.99,
        "category": "680bbb4f7465b16fb90f2dde",
        "stock": 10,
        "imageUrl": "test-image.jpg",
        "createdAt": "2025-04-25T16:41:51.365Z",
        "updatedAt": "2025-04-25T16:41:51.365Z",
        "__v": 0
      },
      "productName": "Test Product",
      "price": 19.99,
      "quantity": 2,
      "_id": "680bbb507465b16fb90f2deb"
    }
  ],
  "totalAmount": 39.98,
  "shippingCost": 5,
  "status": "pending",
  "createdAt": "2025-04-25T16:41:52.056Z",
  "updatedAt": "2025-04-25T16:41:52.056Z",
  "__v": 0
}
PUT orders/680bbb507465b16fb90f2dea - Updating order
âœ… Updated order
Response Status: 200
Response JSON: {
  "_id": "680bbb507465b16fb90f2dea",
  "customerName": "Test Customer",
  "customerPhone": "1234567890",
  "wilaya": "Test City",
  "baladia": "Test Baladia",
  "products": [
    {
      "product": "680bbb4f7465b16fb90f2de0",
      "productName": "Test Product",
      "price": 19.99,
      "quantity": 2,
      "_id": "680bbb507465b16fb90f2df4"
    }
  ],
  "totalAmount": 39.98,
  "shippingCost": 5,
  "status": "processing",
  "createdAt": "2025-04-25T16:41:52.056Z",
  "updatedAt": "2025-04-25T16:41:52.462Z",
  "__v": 0
}
DELETE orders/680bbb507465b16fb90f2dea - Deleting order
âœ… Deleted order
Response Status: 200
Response JSON: {
  "message": "Order deleted"
}

=== Endpoint: /api/discounts ===
Description: Discounts endpoint. Supports CRUD operations for discount codes and offers.
Methods:
  - GET /api/discounts (get all)
  - GET /api/discounts/:id (get by id)
  - POST /api/discounts (create)
  - PUT /api/discounts/:id (update)
  - DELETE /api/discounts/:id (delete)

-----Testing discounts CRUD operations-----
POST discounts - Creating new discount
âœ… Created discount with ID: 680bbb507465b16fb90f2df9
Response Status: 201
Response JSON: {
  "code": "TEST10",
  "percentage": 10,
  "expiresAt": "2025-04-26T16:41:51.144Z",
  "_id": "680bbb507465b16fb90f2df9",
  "__v": 0
}
GET discounts - Getting all discounts
âœ… Retrieved 4 discounts
Response Status: 200
Response JSON: [
  {
    "_id": "68068a008d4bc68932f66dec",
    "name": "Ø®ØµÙ… Ø§ÙˆÙ„ Ø²ÙŠØ§Ø±Ø© Ù„Ù„Ù…ÙˆÙ‚Ø¹",
    "percentage": 20,
    "validFrom": "2025-04-21T00:00:00.000Z",
    "validTo": "2025-05-21T00:00:00.000Z",
    "type": "sale",
    "applicableProducts": [],
    "applicableCategories": [],
    "isActive": true,
    "createdAt": "2025-04-21T18:10:08.315Z",
    "updatedAt": "2025-04-22T01:59:04.326Z",
    "__v": 0
  },
  {
    "_id": "6808f7dcc77be29937a03db8",
    "name": "Ø®ØµÙ… Ø§Ù„ØµÙŠÙ",
    "percentage": 15,
    "validFrom": "2025-04-23T14:23:24.921Z",
    "validTo": "2025-05-23T14:23:24.921Z",
    "type": "seasonal",
    "applicableProducts": [],
    "applicableCategories": [],
    "isActive": true,
    "createdAt": "2025-04-23T14:23:24.923Z",
    "updatedAt": "2025-04-23T14:23:24.923Z",
    "__v": 0
  },
  {
    "_id": "6808f7dcc77be29937a03db9",
    "name": "Ø¹Ø±Ø¶ Ø®Ø§Øµ",
    "percentage": 25,
    "validFrom": "2025-04-23T14:23:24.921Z",
    "validTo": "2025-05-03T14:23:24.921Z",
    "type": "special",
    "applicableProducts": [],
    "applicableCategories": [],
    "isActive": true,
    "createdAt": "2025-04-23T14:23:24.924Z",
    "updatedAt": "2025-04-23T14:23:24.924Z",
    "__v": 0
  },
  {
    "_id": "680bbb507465b16fb90f2df9",
    "code": "TEST10",
    "percentage": 10,
    "expiresAt": "2025-04-26T16:41:51.144Z",
    "__v": 0
  }
]
GET discounts/680bbb507465b16fb90f2df9 - Getting single discount
âœ… Retrieved discount
Response Status: 200
Response JSON: {
  "_id": "680bbb507465b16fb90f2df9",
  "code": "TEST10",
  "percentage": 10,
  "expiresAt": "2025-04-26T16:41:51.144Z",
  "__v": 0
}
PUT discounts/680bbb507465b16fb90f2df9 - Updating discount
âœ… Updated discount
Response Status: 200
Response JSON: {
  "_id": "680bbb507465b16fb90f2df9",
  "code": "TEST10",
  "percentage": 15,
  "expiresAt": "2025-04-26T16:41:51.144Z",
  "__v": 0
}
DELETE discounts/680bbb507465b16fb90f2df9 - Deleting discount
âœ… Deleted discount
Response Status: 200
Response JSON: {
  "message": "Discount deleted"
}

âœ… Cleaned up initial product: 680bbb4f7465b16fb90f2de0

âœ… Cleaned up initial category: 680bbb4f7465b16fb90f2dde
